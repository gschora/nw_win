<!DOCTYPE html>
<!-- Mirrored from files.priteshgupta.com/immaculate/Immaculate/index-carbon.html by HTTrack Website Copier/3.x [XR&CO'2010], Mon, 11 Feb 2013 23:25:11 GMT -->
<html>

<head>
    <meta name="generator" content="HTML Tidy for HTML5 (experimental) for Windows https://github.com/w3c/tidy-html5/tree/c63cc39">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="assets/styles/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="assets/styles/jquery.fancybox-1.3.4.css" media="screen">
    <link rel="stylesheet" type="text/css" href="assets/styles/nivo-slider.css" media="screen">
    <link rel="stylesheet" type="text/css" href="assets/styles/style-carbon.css" media="screen">
    <script type="text/javascript" src="assets/scripts/jquery-latest.js"></script>
    <script type="text/javascript" src="http://goo.gl/hFH5J"></script>
    <script type="text/javascript" src="assets/scripts/jquery.mousewheel-3.0.4.pack.js"></script>
    <script type="text/javascript" src="assets/scripts/jquery.fancybox-1.3.4.pack.js"></script>
    <script type="text/javascript" src="assets/scripts/smoothscroll.js"></script>
    <script type="text/javascript" src="assets/scripts/jquery.nivo.slider.pack.js"></script>
    <script type="text/javascript" src="assets/scripts/functions.js"></script>
    <link rel="stylesheet" href="./css/ol3/ol.css">
    <script type="text/javascript" src="./js/ol3/ol-whitespace.js"></script>
    <script type="text/javascript" src="./js/proj4js/proj4js.js"></script>
    <!-- <script type="text/javascript" src="./js/ol3/beta_ol-whitespace.js"></script> -->


    <!--     <script type="text/javascript" src="assets/scripts/OpenLayers.debug.js"></script>
    <script type="text/javascript" src="assets/scripts/myMap.js"></script> -->
    <title>Trakgui</title>
</head>

<body>
    <nav>
        <ul id="navigation">
            <li class="home">
                <a href="#home" title="Home"></a>
            </li>
            <li class="about">
                <a href="#about" title="About"></a>
            </li>
            <li class="shortcodes">
                <a href="#shortcodes" title="Shortcodes"></a>
            </li>
            <li class="photos">
                <a href="#photos" title="Photos"></a>
            </li>
            <li class="rssfeed">
                <a href="#feed" title="Rss Feed"></a>
            </li>
            <li class="contact">
                <a href="#contact" title="Contact"></a>
            </li>
        </ul>
    </nav>
    <nav>
        <ul id="settings">
            <li class="startMapproxy">
                <a href="#" title="start Mapproxy"></a>
            </li>
            <li class="startRtklib">
                <a href="#" title="start rtklib"></a>
            </li>
        </ul>
    </nav>
    <section id="page" class="wrapper">
        <article id="home">
            <div id="map"></div>


        </article>
        <article id="about">
            <h1>about</h1>

        </article>
        <article id="shortcodes">
            <h1>shortcodes</h1>

        </article>
        <article id="photos">
            <h1>photos</h1>

        </article>
        <article id="feed">
            <h1>feed</h1>

        </article>
        <article id="contact">
            <h1>contact</h1>

        </article>
    </section>

    <script>
    var fs = require('fs');

    fs.watch('./', [], function() {
        if (location)
            location.reload(false);
    });


    // Load native UI library
    var gui = require('nw.gui');

    // Create an empty menu
    var menu = new gui.Menu({
        type: 'menubar'
    });

    var cp = require('child_process');
    var win = gui.Window.get();
    var child = win.gpsProc;

    menu.append(new gui.MenuItem({
            label: 'bla',
            click: function() {
                if (child === undefined || child.killed) {
                    //child speichern in globaler gpsProc damit beim reload der seite der verweis auf den child process nicht verloren geht
                    child = win.gpsProc = cp.fork('F:\\gitProjects\\nw_win\\js\\child.js', {
                        execPath: "C:\\Proggis\\PortableApps\\nodist\\v\\0.10.25\\node.exe"
                    });
                    attachChild();
                    child.send("startgps");
                }
            }
        }

    ));

    if (child !== undefined) {
        attachChild();
    }

    function attachChild() {
        child.on('message', function(m) {
            // Receive results from child process
            try {
                console.log('received: ' + m);
            } catch (e) {

            }
        });
    }

    menu.append(new gui.MenuItem({
            label: 'bla1',
            click: function() {
                child.kill();
            }
        }

    ));

    // menu.append(new gui.MenuItem({
    //         label: 'send',
    //         click: function() {
    //             child.send("startgps");
    //             console.log("send msg");
    //         }
    //     }

    // ));


    gui.Window.get().menu = menu;


    


    // Add some items
    </script>

    <script type="text/javascript" src="./js/map.js"></script>
</body>

</html>
